# Check basic parsing functionality.
#
# RUN: %{llbuild} buildsystem parse %s > %t.out 2> %t.err
# RUN: %{FileCheck} < %t.out %s

# Declare the client information.
#
# CHECK: client ('example-client', version: 1)
# CHECK:  -- 'extra-key': 'extra-value'
client:
  name: example-client
  version: 1
  extra-key: extra-value

# Define the tools.
#
# CHECK: tool('cc')
# CHECK:  -- 'enable-dependencies': 'True'
# CHECK:  -- 'cwd': '/tmp/example'
# CHECK: tool('link')
# CHECK:  -- 'cwd': '/tmp/example'
tools:
  cc:
    enable-dependencies: True
    cwd: /tmp/example
  link:
    cwd: /tmp/example

# Define the targets.
#
# CHECK: target('hello')
# CHECK:  -- nodes: ['hello']
targets:
  hello: ["hello"]

# Define properties on nodes.
nodes:
  ["hello.o", "hello"]:
    hash-content: True

# Define the tasks.
tasks:
  link-hello:
    tool: link
    inputs: ["hello.o"]
    outputs: ["hello"]
  cc-hello.o:
    tool: cc
    input: ["hello.c"]
    outputs: ["hello.o"]
    args: -O0
